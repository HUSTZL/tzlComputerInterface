; 接线方式：将 8253A 的 CLOCK0 引脚连接到 1HZ 脉冲引脚
; OUT0 引脚连接到 LED 中的某一个或蜂鸣器
;结果说明：观察 LED（或蜂鸣器）是否周期性亮灭，先亮后灭
; （或周期性鸣叫，先叫后不叫）
IOY0 EQU 08A0H
IOY1 EQU 08A8H
IOY2 EQU 08B0H
IOY3 EQU 08B8H
IOY4 EQU 08C0H
IOY5 EQU 08C8H
IO8253 EQU 05F0h
IO8253_0 EQU IO8253
IO8253_1 EQU IO8253+1
IO8253_2 EQU IO8253+2
IO8253_C EQU IO8253+3

COUNT EQU 20 ;计数初值为 20
A8255_PA EQU IOY5
A8255_PB EQU IOY5+1
A8255_PC EQU IOY5+2
A8255_CTL EQU IOY5+3
Test8253:
; 8253 工作方式控制字为 00010110B,
;设置 T0 计数器为工作方式 3,低 8 位，二进制计数。
MOV AL, 16h
MOV DX, IO8253_C
OUT DX, AL
MOV DX, IO8253_0 ;送计数初值 COUNT
MOV AX, COUNT
OUT DX, AL
MOV DX, MESS ;String offset in DX, Segment in DS
MOV AX, 0900h ;Call print string bios service;
INT 021h
MOV AX, 04C00h ;exit with code 0 (in AL)
INT 021h ;back to bootloader/monitor
MESS DB 0Ah,0Dh, "8253 WORKING ...",0